<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Center and scale a GRaster, or the opposite — scale,GRaster-method • fasterRaster</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Center and scale a GRaster, or the opposite — scale,GRaster-method"><meta name="description" content="scale() and scalepop() center and scale layers in a GRaster by subtracting from each raster its mean value (centering), then dividing by its standard deviation (scaling). This is useful for using the raster in a linear model, for example, because unscaled predictors can lead to numerical instability. The scale() function uses the sample standard deviation, and the scalepop() function uses the population standard deviation. For even moderately-sized rasters, the difference between these two is negligible, but the scalepop() function can be much faster than the scale() function.
The unscale() function does the opposite of scale() and scalepop(): it multiples each layer by a value (presumably, its standard deviation), and adds another value (presumably, its mean)."><meta property="og:description" content="scale() and scalepop() center and scale layers in a GRaster by subtracting from each raster its mean value (centering), then dividing by its standard deviation (scaling). This is useful for using the raster in a linear model, for example, because unscaled predictors can lead to numerical instability. The scale() function uses the sample standard deviation, and the scalepop() function uses the population standard deviation. For even moderately-sized rasters, the difference between these two is negligible, but the scalepop() function can be much faster than the scale() function.
The unscale() function does the opposite of scale() and scalepop(): it multiples each layer by a value (presumably, its standard deviation), and adds another value (presumably, its mean)."><meta property="og:image" content="https://github.com/adamlilith/fasterRaster/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fasterRaster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">8.4.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/fasterRaster.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/GRasters.html">Types of GRasters</a></li>
    <li><a class="dropdown-item" href="../articles/faster_fasterRaster.html">Making fasterRaster faster</a></li>
    <li><a class="dropdown-item" href="../articles/addons.html">fasterRaster addons</a></li>
    <li><a class="dropdown-item" href="../articles/three_d_objects.html">3-dimensional objects</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/adamlilith/fasterRaster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Center and scale a GRaster, or the opposite</h1>
      <small class="dont-index">Source: <a href="https://github.com/adamlilith/fasterRaster/blob/master/R/scale.r"><code>R/scale.r</code></a></small>
      <div class="d-none name"><code>scale.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>scale()</code> and <code>scalepop()</code> center and scale layers in a <code>GRaster</code> by subtracting from each raster its mean value (centering), then dividing by its standard deviation (scaling). This is useful for using the raster in a linear model, for example, because unscaled predictors can lead to numerical instability. The <code>scale()</code> function uses the sample standard deviation, and the <code>scalepop()</code> function uses the population standard deviation. For even moderately-sized rasters, the difference between these two is negligible, but the <code>scalepop()</code> function can be much faster than the <code>scale()</code> function.</p>
<p>The <code>unscale()</code> function does the opposite of <code>scale()</code> and <code>scalepop()</code>: it multiples each layer by a value (presumably, its standard deviation), and adds another value (presumably, its mean).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for class 'GRaster'</span></span>
<span><span class="fu">scale</span><span class="op">(</span><span class="va">x</span>, center <span class="op">=</span> <span class="cn">TRUE</span>, scale <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'GRaster'</span></span>
<span><span class="fu">scalepop</span><span class="op">(</span><span class="va">x</span>, center <span class="op">=</span> <span class="cn">TRUE</span>, scale <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'GRaster'</span></span>
<span><span class="fu">unscale</span><span class="op">(</span><span class="va">x</span>, center <span class="op">=</span> <span class="cn">NULL</span>, scale <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>GRaster</code>.</p></dd>


<dt id="arg-center">center<a class="anchor" aria-label="anchor" href="#arg-center"></a></dt>
<dd><p>Value depends on the function:</p><ul><li><p><code>scale()</code>: Logical: If <code>TRUE</code> (default), subtract from each raster layer its mean.</p></li>
<li><p><code>unscale()</code>: Numeric vector or <code>NULL</code> (default): This can be a single value, which will be recycled if there is more than one layer in the raster, or one value per raster layer. If a value is <code>NA</code>, then no un-centering will be performed on the relevant raster layer. If <code>NULL</code>, then no un-centering is done.</p></li>
</ul></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p>Value depends on the function:</p><ul><li><p><code>scale()</code>: Logical: If <code>TRUE</code> (default), divide each layer by its standard deviation.</p></li>
<li><p><code>unscale()</code>: Numeric vector or <code>NULL</code> (default): This can be a single value, which will be recycled if there is more than one layer in the raster, or one value per raster layer. If a value is <code>NA</code>, then no unscaling will be done on the relevant raster layer. If <code>NULL</code>, then no un-scaling is done.</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>All functions return a <code>GRaster</code>. The output of <code>scale()</code> and <code>scalepop()</code> will have two attributes, "center" and "scale", which have the means and standard deviations of the original rasters (if <code>center</code> and <code>scale</code> are <code>TRUE</code>, otherwise, they will be <code>NA</code>). These can be obtained using <code>attributes(output_raster)$center</code> and <code>attributes(output_raster)$scale</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="grassStarted.html">grassStarted</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Setup</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Climate rasters:</span></span></span>
<span class="r-in"><span><span class="va">madChelsa</span> <span class="op">&lt;-</span> <span class="fu"><a href="fastData.html">fastData</a></span><span class="op">(</span><span class="st">"madChelsa"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert to GRasters:</span></span></span>
<span class="r-in"><span><span class="va">chelsa</span> <span class="op">&lt;-</span> <span class="fu"><a href="fast.html">fast</a></span><span class="op">(</span><span class="va">madChelsa</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Center and scale rasters</span></span></span>
<span class="r-in"><span><span class="co"># Scale with using sample SD:</span></span></span>
<span class="r-in"><span><span class="va">chScaled</span> <span class="op">&lt;-</span> <span class="fu">scale</span><span class="op">(</span><span class="va">chelsa</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">chScaled</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Scale with using population SD:</span></span></span>
<span class="r-in"><span><span class="va">chScaledPop</span> <span class="op">&lt;-</span> <span class="fu">scalepop</span><span class="op">(</span><span class="va">chelsa</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">chScaledPop</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Means are very close to 0 and SDs to 1:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="global.html">global</a></span><span class="op">(</span><span class="va">chScaled</span>, <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"sd"</span>, <span class="st">"min"</span>, <span class="st">"max"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="global.html">global</a></span><span class="op">(</span><span class="va">chScaledPop</span>, <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"sd"</span>, <span class="st">"min"</span>, <span class="st">"max"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get original means and sd's:</span></span></span>
<span class="r-in"><span><span class="va">centers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">chScaled</span><span class="op">)</span><span class="op">$</span><span class="va">center</span></span></span>
<span class="r-in"><span><span class="va">scales</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">chScaled</span><span class="op">)</span><span class="op">$</span><span class="va">scale</span></span></span>
<span class="r-in"><span><span class="va">centers</span></span></span>
<span class="r-in"><span><span class="va">scales</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Unscale rasters:</span></span></span>
<span class="r-in"><span><span class="va">chUnscaled</span> <span class="op">&lt;-</span> <span class="fu">unscale</span><span class="op">(</span><span class="va">chScaled</span>, center <span class="op">=</span> <span class="va">centers</span>, scale <span class="op">=</span> <span class="va">scales</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Means and SD are returned to original values:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="global.html">global</a></span><span class="op">(</span><span class="va">chUnscaled</span>, <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"sd"</span>, <span class="st">"min"</span>, <span class="st">"max"</span><span class="op">)</span><span class="op">)</span> <span class="co"># unscaled</span></span></span>
<span class="r-in"><span><span class="fu"><a href="global.html">global</a></span><span class="op">(</span><span class="va">chelsa</span>, <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"sd"</span>, <span class="st">"min"</span>, <span class="st">"max"</span><span class="op">)</span><span class="op">)</span> <span class="co"># original</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adam B. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

