<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Identify terrain feature types — geomorphons,GRaster-method • fasterRaster</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Identify terrain feature types — geomorphons,GRaster-method"><meta name="description" content='Geomorphons are idealized terrain types calculated from an elevator raster based on a moving window of a given size. The window is a torus (which can have an inner radius of 0, so can also be a circle), which allows it to identify geomorphons of a given size while ignoring ones larger or smaller. There are 10 basic geomorphons. Consult the the manual for GRASS module r.geomorphon using grassHelp("r.geomorphon") for more details and diagrams of each type of geomorphon. Geomorphon types include:
Flat areas: Focal area has approximately the same elevation as surrounding areas
Pits: An area is lower than all other surrounding areas
Valley: Focal area has elevation similar to two opposing side of the window but lower than the other two opposing sides
Footslope: Focal region is at the "bottom" of a slope
Hollow: A small valley/indention in the crest of a hill
Slope: Cells in the window form an approximately uniform slope
Spur: An extrusion at the foot of a hill (i.e.,, a small hill extending out from the foot of a slope)
Shoulder: The crest of a slope
Ridge: Opposite of a valley; focal area is higher than two opposing sides but approximately the same elevation as the other two opposing sides
Peak: Focal area is higher than any other in the window

'><meta property="og:description" content='Geomorphons are idealized terrain types calculated from an elevator raster based on a moving window of a given size. The window is a torus (which can have an inner radius of 0, so can also be a circle), which allows it to identify geomorphons of a given size while ignoring ones larger or smaller. There are 10 basic geomorphons. Consult the the manual for GRASS module r.geomorphon using grassHelp("r.geomorphon") for more details and diagrams of each type of geomorphon. Geomorphon types include:
Flat areas: Focal area has approximately the same elevation as surrounding areas
Pits: An area is lower than all other surrounding areas
Valley: Focal area has elevation similar to two opposing side of the window but lower than the other two opposing sides
Footslope: Focal region is at the "bottom" of a slope
Hollow: A small valley/indention in the crest of a hill
Slope: Cells in the window form an approximately uniform slope
Spur: An extrusion at the foot of a hill (i.e.,, a small hill extending out from the foot of a slope)
Shoulder: The crest of a slope
Ridge: Opposite of a valley; focal area is higher than two opposing sides but approximately the same elevation as the other two opposing sides
Peak: Focal area is higher than any other in the window

'><meta property="og:image" content="https://github.com/adamlilith/fasterRaster/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fasterRaster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">8.4.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/fasterRaster.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/GRasters.html">Types of GRasters</a></li>
    <li><a class="dropdown-item" href="../articles/faster_fasterRaster.html">Making fasterRaster faster</a></li>
    <li><a class="dropdown-item" href="../articles/addons.html">fasterRaster addons</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/adamlilith/fasterRaster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Identify terrain feature types</h1>
      <small class="dont-index">Source: <a href="https://github.com/adamlilith/fasterRaster/blob/master/R/geomorphons.r"><code>R/geomorphons.r</code></a></small>
      <div class="d-none name"><code>geomorphons.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Geomorphons are idealized terrain types calculated from an elevator raster based on a moving window of a given size. The window is a torus (which can have an inner radius of 0, so can also be a circle), which allows it to identify geomorphons of a given size while ignoring ones larger or smaller. There are 10 basic geomorphons. Consult the the manual for <strong>GRASS</strong> module <code>r.geomorphon</code> using <code>grassHelp("r.geomorphon")</code> for more details and diagrams of each type of geomorphon. Geomorphon types include:</p><ol><li><p>Flat areas: Focal area has approximately the same elevation as surrounding areas</p></li>
<li><p>Pits: An area is lower than all other surrounding areas</p></li>
<li><p>Valley: Focal area has elevation similar to two opposing side of the window but lower than the other two opposing sides</p></li>
<li><p>Footslope: Focal region is at the "bottom" of a slope</p></li>
<li><p>Hollow: A small valley/indention in the crest of a hill</p></li>
<li><p>Slope: Cells in the window form an approximately uniform slope</p></li>
<li><p>Spur: An extrusion at the foot of a hill (i.e.,, a small hill extending out from the foot of a slope)</p></li>
<li><p>Shoulder: The crest of a slope</p></li>
<li><p>Ridge: Opposite of a valley; focal area is higher than two opposing sides but approximately the same elevation as the other two opposing sides</p></li>
<li><p>Peak: Focal area is higher than any other in the window</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for class 'GRaster'</span></span>
<span><span class="fu">geomorphons</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  inner <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  outer <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"cells"</span>,</span>
<span>  flat <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  flatDist <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"1"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A single-layer <code>GRaster</code>, typically representing elevation.</p></dd>


<dt id="arg-inner-outer">inner, outer<a class="anchor" aria-label="anchor" href="#arg-inner-outer"></a></dt>
<dd><p>Integer: Inner and outer radii of the torus used to identify geomorphons, in cells or meters (set by argument <code>unit</code>). The inner default value is 0 and the outer default value is 3. The <code>outer</code> radius sets the maximum size of a geomorphon that that can be identified, and <code>inner</code> sets the smallest size. If <code>unit</code> is <code>"meters"</code>, the value of <code>outer</code> must be larger than the smaller dimension of any cell in the east-west and north-south directions.</p></dd>


<dt id="arg-unit">unit<a class="anchor" aria-label="anchor" href="#arg-unit"></a></dt>
<dd><p>Character: Units of <code>inner</code> and outer; can be either <code>"cells"</code> (default) or <code>"meters"</code>. Partial matching is used.</p></dd>


<dt id="arg-flat">flat<a class="anchor" aria-label="anchor" href="#arg-flat"></a></dt>
<dd><p>Numeric value &gt;= 0: Minimum difference (in degrees) between the focal area areas around it for a geomorphon to be considered as "flat". Larger cells (i.e., ~1 km resolution or larger) require smaller values (&lt;&lt;1) to correctly identify flat areas. Higher values result in more areas being classified as "flat" geomorphons. The default value is 1.</p></dd>


<dt id="arg-flatdist">flatDist<a class="anchor" aria-label="anchor" href="#arg-flatdist"></a></dt>
<dd><p>Numeric: Distance (in meters) to correct for the effect of large distances on the diminished capacity to identify "flat" geomorphons. If the distance between the focal area and a surrounding area surpasses this distance, then the effective value of <code>flat</code> will be reduced</p></dd>


<dt id="arg-mode">mode<a class="anchor" aria-label="anchor" href="#arg-mode"></a></dt>
<dd><p>Character: Method for implementing the zenith/line-of-site search. Partial matching is used:</p><ul><li><p><code>"1"</code> (default): The "original" geomorphon mode (in <strong>GRASS</strong> module <code>r.geomorphon</code>, the "anglev1" method)</p></li>
<li><p><code>"2"</code>: Better handling of cases with equal zenith/nadir angles (the "anglev2" method)</p></li>
<li><p><code>"2d"</code>: As <code>"2"</code>, but takes into account zenith/nadir distance ("anglev2_distance" method)</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A categorical <code>GRaster</code> where each geomorphon is a category (see <code><a href="../articles/GRasters.html">vignette("GRasters", package = "fasterRaster")</a></code>).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><strong>GRASS</strong> manual for module <code>r.geomorphon</code> (see <code>grassHelp("r.geomorphon")</code>)</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="grassStarted.html">grassStarted</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Setup</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example data</span></span></span>
<span class="r-in"><span><span class="va">madElev</span> <span class="op">&lt;-</span> <span class="fu"><a href="fastData.html">fastData</a></span><span class="op">(</span><span class="st">"madElev"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert a SpatRaster to a GRaster:</span></span></span>
<span class="r-in"><span><span class="va">elev</span> <span class="op">&lt;-</span> <span class="fu"><a href="fast.html">fast</a></span><span class="op">(</span><span class="va">madElev</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Geomorphons:</span></span></span>
<span class="r-in"><span><span class="va">geos</span> <span class="op">&lt;-</span> <span class="fu">geomorphons</span><span class="op">(</span><span class="va">elev</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">geos</span></span></span>
<span class="r-in"><span><span class="fu"><a href="levels.html">levels</a></span><span class="op">(</span><span class="va">geos</span><span class="op">)</span> <span class="co"># levels</span></span></span>
<span class="r-in"><span><span class="fu"><a href="freq.html">freq</a></span><span class="op">(</span><span class="va">geos</span><span class="op">)</span> <span class="co"># frequencies</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">col</span> <span class="op">&lt;-</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="st">"gray90"</span>, <span class="st">"red"</span>, <span class="st">"orange"</span>, <span class="st">"blue"</span>, <span class="st">"green"</span>, <span class="st">"pink"</span>, <span class="st">"firebrick"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"purple"</span>, <span class="st">"gray50"</span>, <span class="st">"black"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">geos</span>, col <span class="op">=</span> <span class="va">col</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adam B. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

