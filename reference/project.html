<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Change the coordinate reference system of a GRaster or GVector — project,GRaster-method • fasterRaster</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Change the coordinate reference system of a GRaster or GVector — project,GRaster-method"><meta name="description" content="project() changes the coordinate reference system (CRS) of a GRaster or GVector. It has three use cases:
x is a GRaster and y is a GRaster: x will be projected to the CRS of y and resampled to have the same resolution as y. If argument align is FALSE, then it will also be cropped to the extent of y.
x is a GRaster and y is a GVector or a CRS string (typically in Well-Known Text format): x will be projected to the CRS specified by y and resampled but not cropped.
x is a GVector and y is a GRaster, GVector, or CRS string: The vector will be projected to the CRS of y.

"><meta property="og:description" content="project() changes the coordinate reference system (CRS) of a GRaster or GVector. It has three use cases:
x is a GRaster and y is a GRaster: x will be projected to the CRS of y and resampled to have the same resolution as y. If argument align is FALSE, then it will also be cropped to the extent of y.
x is a GRaster and y is a GVector or a CRS string (typically in Well-Known Text format): x will be projected to the CRS specified by y and resampled but not cropped.
x is a GVector and y is a GRaster, GVector, or CRS string: The vector will be projected to the CRS of y.

"><meta property="og:image" content="https://github.com/adamlilith/fasterRaster/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fasterRaster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">8.3.0.7026</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/fasterRaster.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/GRasters.html">Types of GRasters</a></li>
    <li><a class="dropdown-item" href="../articles/faster_fasterRaster.html">Making fasterRaster faster</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/adamlilith/fasterRaster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Change the coordinate reference system of a GRaster or GVector</h1>
      <small class="dont-index">Source: <a href="https://github.com/adamlilith/fasterRaster/blob/master/R/project.r"><code>R/project.r</code></a></small>
      <div class="d-none name"><code>project.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>project()</code> changes the coordinate reference system (CRS) of a <code>GRaster</code> or <code>GVector</code>. It has three use cases:</p><ul><li><p><code>x</code> is a <code>GRaster</code> and <code>y</code> is a <code>GRaster</code>: <code>x</code> will be projected to the CRS of <code>y</code> and resampled to have the same resolution as <code>y</code>. If argument <code>align</code> is <code>FALSE</code>, then it will also be cropped to the extent of <code>y</code>.</p></li>
<li><p><code>x</code> is a <code>GRaster</code> and <code>y</code> is a <code>GVector</code> or a CRS string (typically in Well-Known Text format): <code>x</code> will be projected to the CRS specified by <code>y</code> and resampled but not cropped.</p></li>
<li><p><code>x</code> is a <code>GVector</code> and <code>y</code> is a <code>GRaster</code>, <code>GVector</code>, or CRS string: The vector will be projected to the CRS of <code>y</code>.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for class 'GRaster'</span></span>
<span><span class="fu">project</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  align <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  method <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fallback <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  res <span class="op">=</span> <span class="st">"fallback"</span>,</span>
<span>  wrap <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'GVector'</span></span>
<span><span class="fu">project</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, wrap <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>GRaster</code> or <code>GVector</code> to be projected.</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>A character or <code>GLocation</code> object (i.e., typically a <code>GRaster</code> or <code>GVector</code>): Used to set the focal <code>GRaster</code> or <code>GVector</code>'s new CRS (and resolution and possibly extent, for <code>GRaster</code>s).</p></dd>


<dt id="arg-align">align<a class="anchor" aria-label="anchor" href="#arg-align"></a></dt>
<dd><p>Logical: If <code>FALSE</code> (default), and <code>x</code> and <code>y</code> are <code>GRaster</code>s, then the extent of <code>x</code> will be cropped to the extent of <code>y</code>. If <code>TRUE</code>, no cropping is performed.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Character or <code>NULL</code> (for <code>GRaster</code>s only): Method to use to conduct the transformation (rasters only). Partial matching is used.</p><ul><li><p><code>NULL</code> (default): Automatically choose based on raster properties (<code>near</code> for categorical data, <code>bilinear</code> for continuous data).</p></li>
<li><p><code>"near"</code>: Nearest neighbor. Best for categorical data, and often a poor choice for continuous data.  If <code><a href="datatype.html">datatype()</a></code> is <code>integer</code>, this method will be used by default.</p></li>
<li><p><code>"bilinear"</code>: Bilinear interpolation (default for non-categorical data; uses weighted values from 4 cells).</p></li>
<li><p><code>"bicubic"</code>: Bicubic interpolation (uses weighted values from 16 cells).</p></li>
<li><p><code>"lanczos"</code>: Lanczos interpolation (uses weighted values from 25 cells).</p></li>
</ul><p><em>Note #1</em>: If <code>x</code> and <code>y</code> are <code>GRaster</code>s, and <code>res = "terra"</code>, then the same <code>method</code> is used to resample <code>x</code> to the resolution of <code>y</code> before projecting <code>x</code>.</p>
<p><em>Note #2</em>: Methods that use multiple cells will cause the focal cell to become <code>NA</code> if there is at least one cell with an <code>NA</code> in the cells it draws from. These <code>NA</code> cells can often be filled using the <code>fallback</code> argument.</p></dd>


<dt id="arg-fallback">fallback<a class="anchor" aria-label="anchor" href="#arg-fallback"></a></dt>
<dd><p>Logical (for projecting <code>GRaster</code>s only): If <code>TRUE</code> (default), then use "lower" resampling methods to fill in <code>NA</code> cells when a "higher" resampling method is used. For example, if <code>method = "bicubic"</code>, <code>NA</code> cells will be filled in using the <code>bilinear</code> method, except when that results in <code>NA</code>s, in which case the <code>near</code> method will be used. Fallback causes fewer cells to revert to <code>NA</code> values, so may be better at capturing complex "edges" (e.g., coastlines). Fallback does increase processing time because each "lower" method must be applied, then results merged. Fallback is not used if <code>method = "near"</code>.</p></dd>


<dt id="arg-res">res<a class="anchor" aria-label="anchor" href="#arg-res"></a></dt>
<dd><p>Character (for projecting <code>GRaster</code>s only): Method used to set the resolution of a <code>GRaster</code> in the new CRS. This can be one of three options.  Partial matching is used and case ignored:</p><ul><li><p><code>"terra"</code>: This method creates an output raster that is as close as possible in values and resolution to the one that <code><a href="https://rspatial.github.io/terra/reference/project.html" class="external-link">terra::project()</a></code> would create. However, for large rasters (i.e., many cells), this can fail because <code><a href="https://rspatial.github.io/terra/reference/project.html" class="external-link">terra::project()</a></code> encounters memory limits (it is used internally to create a template). This method resamples the focal raster in its starting CRS, then projects it to the destination CRS.</p></li>
<li><p><code>"template"</code>: This method can only be used if <code>y</code> is a <code>GRaster</code>. The output will have the same resolution as <code>y</code> and possibly the same extent (depending on the value of <code>align</code>). However, unlike the <code>"terra"</code> method, cell values will not necessarily be as close as possible to what <code><a href="https://rspatial.github.io/terra/reference/project.html" class="external-link">terra::project()</a></code> would generate (unless <code>method = "near"</code>). Unlike the <code>"terra"</code> method, this method does not resample the focal raster in its starting CRS before projecting. For large rasters it will be faster than the <code>"terra"</code> method (especially if <code>"method = "near"</code>), and it should be less likely to fail because of memory limits.</p></li>
<li><p>Two numeric values: Values for the new resolution (x- and y-dimensions).</p></li>
<li><p><code>"center"</code>: This method locates the centroid of the raster to be projected (in the same CRS as the original raster). It then creates four points north, south, east, and west of the centroid, each spaced one cell's width from the centroid. This set of points is then projected to the new CRS. The new cell size in the x-dimension will be the average of the distance between the east and west points from the centroid, and in the y-dimension the average from the centroid to the north and south points.</p></li>
<li><p><code>"fallback"</code> (default): This applies the <code>terra</code> method first, but if that fails, then tries <code>template</code>, then <code>center</code>. This process can take a long time for large rasters.</p></li>
</ul></dd>


<dt id="arg-wrap">wrap<a class="anchor" aria-label="anchor" href="#arg-wrap"></a></dt>
<dd><p>Logical:</p><ul><li><p><code>GRaster</code>s: When projecting rasters that "wrap around" (i.e., whole-world rasters or rasters that have edges that actually circle around to meet on the globe), <code>wrap</code> should be <code>TRUE</code> to avoid removing rows and columns from the "edge" of the map. The default is <code>FALSE</code>.</p></li>
<li><p><code>GVector</code>s: When projecting vectors that span the international date line at 180E/W, <code>wrap</code> should be <code>TRUE</code> to avoid an issue where the coordinates are incorrectly mapped to the range -180 to 180.</p></li>
</ul></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical (for projecting <code>GRaster</code>s only): If <code>TRUE</code>, display progress. Default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>GRaster</code> or <code>GVector</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When projecting a raster, the "fallback" methods in <strong>GRASS</strong> module <code>r.import</code> are actually used, even though the <code>method</code> argument takes the strings specifying non-fallback methods. See the manual page for the <code>r.import</code> <strong>GRASS</strong> module.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rspatial.github.io/terra/reference/project.html" class="external-link">terra::project()</a></code>, <code><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">sf::st_transform()</a></code>, modules <code>r.proj</code>, <code>r.import</code>, and <code>v.proj</code> in <strong>GRASS</strong></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="grassStarted.html">grassStarted</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Setup for all examples</span></span></span>
<span class="r-in"><span><span class="co">##########################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Climate raster, elevation raster, rivers vector</span></span></span>
<span class="r-in"><span><span class="va">madElev</span> <span class="op">&lt;-</span> <span class="fu"><a href="fastData.html">fastData</a></span><span class="op">(</span><span class="st">"madElev"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">madRivers</span> <span class="op">&lt;-</span> <span class="fu"><a href="fastData.html">fastData</a></span><span class="op">(</span><span class="st">"madRivers"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">madChelsa</span> <span class="op">&lt;-</span> <span class="fu"><a href="fastData.html">fastData</a></span><span class="op">(</span><span class="st">"madChelsa"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert objects into fasterRaster formats</span></span></span>
<span class="r-in"><span><span class="va">chelsa</span> <span class="op">&lt;-</span> <span class="fu"><a href="fast.html">fast</a></span><span class="op">(</span><span class="va">madChelsa</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">elev</span> <span class="op">&lt;-</span> <span class="fu"><a href="fast.html">fast</a></span><span class="op">(</span><span class="va">madElev</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rivers</span> <span class="op">&lt;-</span> <span class="fu"><a href="fast.html">fast</a></span><span class="op">(</span><span class="va">madRivers</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Project raster without resampling</span></span></span>
<span class="r-in"><span><span class="va">elevWGS84</span> <span class="op">&lt;-</span> <span class="fu">project</span><span class="op">(</span><span class="va">elev</span>, <span class="fu"><a href="crs.html">crs</a></span><span class="op">(</span><span class="va">chelsa</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">elevWGS84</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Project raster and resample to resolution of another raster</span></span></span>
<span class="r-in"><span><span class="va">elevWGS84Resamp</span> <span class="op">&lt;-</span> <span class="fu">project</span><span class="op">(</span><span class="va">elev</span>, <span class="va">chelsa</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">elevWGS84Resamp</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="res.html">res</a></span><span class="op">(</span><span class="va">elevWGS84</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="res.html">res</a></span><span class="op">(</span><span class="va">elevWGS84Resamp</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="res.html">res</a></span><span class="op">(</span><span class="va">chelsa</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Project vector</span></span></span>
<span class="r-in"><span><span class="va">riversWGS84</span> <span class="op">&lt;-</span> <span class="fu">project</span><span class="op">(</span><span class="va">rivers</span>, <span class="va">chelsa</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">riversWGS84</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="crs.html">crs</a></span><span class="op">(</span><span class="va">rivers</span><span class="op">)</span><span class="op">)</span> <span class="co"># using "cat()" to make it look nice</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="crs.html">crs</a></span><span class="op">(</span><span class="va">riversWGS84</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adam B. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

