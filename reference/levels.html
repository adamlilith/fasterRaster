<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Set and get categories for categorical rasters — levels,GRaster-method • fasterRaster</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Set and get categories for categorical rasters — levels,GRaster-method"><meta name="description" content='GRasters can represent categorical data. Cell values are actually integers, each corresponding to a category, such as "desert" or "wetland." A categorical raster is associated with a table that matches each value to a category name. The table must be NULL (i.e., no categories–so not a categorical raster), or have at least two columns. The first column must have integers and represent raster values. One or more subsequent columns must have category labels. The column with these labels is the "active category".
levels(): Displays the "levels" table of a raster (just the value and active category columns).
cats(): Displays the entire "levels" table of a raster.
levels()&amp;lt;-: (Re)assigns the "levels" table to each layer of a raster. Assigning a "levels" table to an integer raster makes it a categorical raster.
categories(): (Re)assigns the "levels" table to specific layer(s) of a raster.
For a complete list of functions relevant to categorical rasters, see `vignette("GRasters", package = "fasterRaster")).

'><meta property="og:description" content='GRasters can represent categorical data. Cell values are actually integers, each corresponding to a category, such as "desert" or "wetland." A categorical raster is associated with a table that matches each value to a category name. The table must be NULL (i.e., no categories–so not a categorical raster), or have at least two columns. The first column must have integers and represent raster values. One or more subsequent columns must have category labels. The column with these labels is the "active category".
levels(): Displays the "levels" table of a raster (just the value and active category columns).
cats(): Displays the entire "levels" table of a raster.
levels()&amp;lt;-: (Re)assigns the "levels" table to each layer of a raster. Assigning a "levels" table to an integer raster makes it a categorical raster.
categories(): (Re)assigns the "levels" table to specific layer(s) of a raster.
For a complete list of functions relevant to categorical rasters, see `vignette("GRasters", package = "fasterRaster")).

'><meta property="og:image" content="https://github.com/adamlilith/fasterRaster/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fasterRaster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">8.4.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/fasterRaster.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/GRasters.html">Types of GRasters</a></li>
    <li><a class="dropdown-item" href="../articles/faster_fasterRaster.html">Making fasterRaster faster</a></li>
    <li><a class="dropdown-item" href="../articles/addons.html">fasterRaster addons</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/adamlilith/fasterRaster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Set and get categories for categorical rasters</h1>
      <small class="dont-index">Source: <a href="https://github.com/adamlilith/fasterRaster/blob/master/R/levels.r"><code>R/levels.r</code></a></small>
      <div class="d-none name"><code>levels.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>GRaster</code>s can represent categorical data. Cell values are actually integers, each corresponding to a category, such as "desert" or "wetland." A categorical raster is associated with a table that matches each value to a category name. The table must be <code>NULL</code> (i.e., no categories–so not a categorical raster), or have at least two columns. The first column must have integers and represent raster values. One or more subsequent columns must have category labels. The column with these labels is the "active category".</p><ul><li><p><code>levels()</code>: Displays the "levels" table of a raster (just the value and active category columns).</p></li>
<li><p><code>cats()</code>: Displays the entire "levels" table of a raster.</p></li>
<li><p><code>levels()&lt;-</code>: (Re)assigns the "levels" table to each layer of a raster. Assigning a "levels" table to an integer raster makes it a categorical raster.</p></li>
<li><p><code>categories()</code>: (Re)assigns the "levels" table to specific layer(s) of a raster.</p></li>
<li><p>For a complete list of functions relevant to categorical rasters, see `vignette("GRasters", package = "fasterRaster")).</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for class 'GRaster'</span></span>
<span><span class="fu">levels</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'GRaster'</span></span>
<span><span class="fu">cats</span><span class="op">(</span><span class="va">x</span>, layer <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="dim.html">nlyr</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'GRaster'</span></span>
<span><span class="fu">categories</span><span class="op">(</span><span class="va">x</span>, layer <span class="op">=</span> <span class="fl">1</span>, <span class="va">value</span>, active <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'GRaster,data.frame'</span></span>
<span><span class="fu">levels</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="co"># S4 method for class 'GRaster,data.table'</span></span>
<span><span class="fu">levels</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="co"># S4 method for class 'GRaster,GRaster'</span></span>
<span><span class="fu">levels</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="co"># S4 method for class 'GRaster,list'</span></span>
<span><span class="fu">levels</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>GRaster</code>.</p></dd>


<dt id="arg-layer">layer<a class="anchor" aria-label="anchor" href="#arg-layer"></a></dt>
<dd><p>Numeric integers, logical vector, or character: For <code>cats()</code> and <code>categories()</code>, this specifies the layer(s)for which to obtain level(s).</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p>A <code>data.frame</code>, <code>data.table</code>, a list of <code>data.frames</code> or <code>data.tables</code> with one per raster layer, or a categorical <code>SpatRaster</code>. The table's first column is the "value" column and must contain numeric values (of class <code>numeric</code> or <code>character</code>). If a <code>SpatRaster</code> is supplied, then its categories will be transferred to the <code>GRaster</code>.</p></dd>


<dt id="arg-active">active<a class="anchor" aria-label="anchor" href="#arg-active"></a></dt>
<dd><p>An integer or a character: The index or column name of the column used for category labels (the "active column"). Following <code><a href="https://rspatial.github.io/terra/reference/activeCat.html" class="external-link">terra::activeCat()</a></code>, the first column of the "levels" table is ignored, so a value of 1 means to use the second column of the table for labels. A value of 2 means to use the third column, and so on.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Values returned are:</p><ul><li><p><code>levels()</code> and <code>cats()</code>: A list of <code>data.frame</code>s or <code>data.table</code>s, one per raster layer.</p></li>
<li><p><code>levels()&lt;-</code> and <code>categories()</code>: A <code>GRaster</code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rspatial.github.io/terra/reference/factors.html" class="external-link">terra::levels()</a></code>, <code>levels&lt;-</code>, <code><a href="https://rspatial.github.io/terra/reference/factors.html" class="external-link">terra::cats()</a></code>, <code><a href="https://rspatial.github.io/terra/reference/factors.html" class="external-link">terra::categories()</a></code>, see <code><a href="../articles/GRasters.html">vignette("GRasters", package = "fasterRaster")</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="grassStarted.html">grassStarted</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Setup</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example data: Land cover raster</span></span></span>
<span class="r-in"><span><span class="va">madCover</span> <span class="op">&lt;-</span> <span class="fu"><a href="fastData.html">fastData</a></span><span class="op">(</span><span class="st">"madCover"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert categorical SpatRaster to categorical GRaster:</span></span></span>
<span class="r-in"><span><span class="va">cover</span> <span class="op">&lt;-</span> <span class="fu"><a href="fast.html">fast</a></span><span class="op">(</span><span class="va">madCover</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Properties of categorical rasters</span></span></span>
<span class="r-in"><span><span class="co">#####################################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cover</span> <span class="co"># note categories</span></span></span>
<span class="r-in"><span><span class="fu"><a href="is.int.html">is.factor</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span> <span class="co"># Is the raster categorical?</span></span></span>
<span class="r-in"><span><span class="fu"><a href="nlevels.html">nlevels</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span> <span class="co"># number of levels</span></span></span>
<span class="r-in"><span><span class="fu">levels</span><span class="op">(</span><span class="va">cover</span><span class="op">)</span> <span class="co"># just the value and active column</span></span></span>
<span class="r-in"><span><span class="fu">cats</span><span class="op">(</span><span class="va">cover</span><span class="op">)</span> <span class="co"># all columns</span></span></span>
<span class="r-in"><span><span class="fu"><a href="minmax.html">minmax</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span> <span class="co"># min/max values</span></span></span>
<span class="r-in"><span><span class="fu"><a href="minmax.html">minmax</a></span><span class="op">(</span><span class="va">cover</span>, levels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># min/max categories</span></span></span>
<span class="r-in"><span><span class="fu"><a href="catNames.html">catNames</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span> <span class="co"># column names of the levels table</span></span></span>
<span class="r-in"><span><span class="fu"><a href="missingCats.html">missingCats</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span> <span class="co"># categories in table with no values in raster</span></span></span>
<span class="r-in"><span><span class="fu"><a href="freq.html">freq</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span> <span class="co"># frequency of each category (number of cells)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="zonalGeog.html">zonalGeog</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span> <span class="co"># geometric statistics</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Active column</span></span></span>
<span class="r-in"><span><span class="co">#################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Which column sets the category labels?</span></span></span>
<span class="r-in"><span><span class="fu"><a href="activeCat.html">activeCat</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="activeCat.html">activeCat</a></span><span class="op">(</span><span class="va">cover</span>, names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="activeCat.html">activeCats</a></span><span class="op">(</span><span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="va">cover</span>, <span class="va">cover</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Choose a different column for category labels:</span></span></span>
<span class="r-in"><span><span class="fu">levels</span><span class="op">(</span><span class="va">cover</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="activeCat.html">activeCat</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="fu">levels</span><span class="op">(</span><span class="va">cover</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Managing levels tables</span></span></span>
<span class="r-in"><span><span class="co">##########################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove unused levels:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="nlevels.html">nlevels</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cover</span> <span class="op">&lt;-</span> <span class="fu"><a href="droplevels.html">droplevels</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="nlevels.html">nlevels</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Re-assign levels:</span></span></span>
<span class="r-in"><span><span class="va">value</span> <span class="op">&lt;-</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">40</span>, <span class="fl">50</span>, <span class="fl">120</span>, <span class="fl">130</span>, <span class="fl">140</span>, <span class="fl">170</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">label</span> <span class="op">&lt;-</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="st">"Cropland"</span>, <span class="st">"Cropland"</span>, <span class="st">"Forest"</span>, <span class="st">"Forest"</span>,</span></span>
<span class="r-in"><span> <span class="st">"Grassland"</span>, <span class="st">"Shrubland"</span>, <span class="st">"Herbaceous"</span>, <span class="st">"Flooded"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">newCats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>value <span class="op">=</span> <span class="va">value</span>, label <span class="op">=</span> <span class="va">label</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cover</span> <span class="op">&lt;-</span> <span class="fu">categories</span><span class="op">(</span><span class="va">cover</span>, layer <span class="op">=</span> <span class="fl">1</span>, value <span class="op">=</span> <span class="va">newCats</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cats</span><span class="op">(</span><span class="va">cover</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This is the same as:</span></span></span>
<span class="r-in"><span><span class="fu">levels</span><span class="op">(</span><span class="va">cover</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">newCats</span></span></span>
<span class="r-in"><span><span class="fu">cats</span><span class="op">(</span><span class="va">cover</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Are there any values not assigned a category?</span></span></span>
<span class="r-in"><span><span class="fu"><a href="missingCats.html">missingCats</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Let's assign a category for value 210 (water):</span></span></span>
<span class="r-in"><span><span class="va">water</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>value <span class="op">=</span> <span class="fl">210</span>, label <span class="op">=</span> <span class="st">"Water"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="addCats.html">addCats</a></span><span class="op">(</span><span class="va">cover</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">water</span></span></span>
<span class="r-in"><span><span class="fu">levels</span><span class="op">(</span><span class="va">cover</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add more information to the levels table using merge():</span></span></span>
<span class="r-in"><span><span class="va">landType</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     Value <span class="op">=</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">40</span>, <span class="fl">50</span>, <span class="fl">120</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>     Type <span class="op">=</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="st">"Irrigated"</span>, <span class="st">"Rainfed"</span>, <span class="st">"Broadleaf evergreen"</span>,</span></span>
<span class="r-in"><span>     <span class="st">"Broadleaf deciduous"</span>, <span class="st">"Mosaic with forest"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cats</span><span class="op">(</span><span class="va">cover</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cover</span> <span class="op">&lt;-</span> <span class="fu"><a href="addCats.html">addCats</a></span><span class="op">(</span><span class="va">cover</span>, <span class="va">landType</span>, merge <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cats</span><span class="op">(</span><span class="va">cover</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Logical operations on categorical rasters</span></span></span>
<span class="r-in"><span><span class="co">#############################################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cover</span> <span class="op">&lt;</span> <span class="st">"Forest"</span> <span class="co"># 1 for cells with a value &lt; 40, 0 otherwise</span></span></span>
<span class="r-in"><span><span class="va">cover</span> <span class="op">&lt;=</span> <span class="st">"Forest"</span> <span class="co"># 1 for cells with a value &lt; 120, 0 otherwise</span></span></span>
<span class="r-in"><span><span class="va">cover</span> <span class="op">==</span> <span class="st">"Forest"</span> <span class="co"># 1 for cells with value of 40-120, 0 otherwise</span></span></span>
<span class="r-in"><span><span class="va">cover</span> <span class="op">!=</span> <span class="st">"Forest"</span> <span class="co"># 1 for cells with value that is not 40-120, 0 otherwise</span></span></span>
<span class="r-in"><span><span class="va">cover</span> <span class="op">&gt;</span> <span class="st">"Forest"</span> <span class="co"># 1 for cells with a value &gt; 120, 0 otherwise</span></span></span>
<span class="r-in"><span><span class="va">cover</span> <span class="op">&gt;=</span> <span class="st">"Forest"</span> <span class="co"># 1 for cells with a value &gt;= 120, 0 otherwise</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cover</span> <span class="op"><a href="match.html">%in%</a></span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="st">"Cropland"</span>, <span class="st">"Forest"</span><span class="op">)</span> <span class="co"># 1 for cropland/forest cells, 0 otherwise</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Combine categories from different rasters</span></span></span>
<span class="r-in"><span><span class="co">#############################################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># NB We only have one categorical raster ships with fasterRaster, so we</span></span></span>
<span class="r-in"><span><span class="co"># will create a second one from the elevation raster.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Divide elevation raster into "low/medium/high" levels:</span></span></span>
<span class="r-in"><span><span class="va">madElev</span> <span class="op">&lt;-</span> <span class="fu"><a href="fastData.html">fastData</a></span><span class="op">(</span><span class="st">"madElev"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">elev</span> <span class="op">&lt;-</span> <span class="fu"><a href="fast.html">fast</a></span><span class="op">(</span><span class="va">madElev</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">elev</span> <span class="op">&lt;-</span> <span class="fu"><a href="project.html">project</a></span><span class="op">(</span><span class="va">elev</span>, <span class="va">cover</span>, method <span class="op">=</span> <span class="st">"near"</span><span class="op">)</span> <span class="co"># convert to same CRS</span></span></span>
<span class="r-in"><span><span class="va">fun</span> <span class="op">&lt;-</span> <span class="st">"= if(madElev &lt; 100, 0, if(madElev &lt; 400, 1, 2))"</span></span></span>
<span class="r-in"><span><span class="va">elevCat</span> <span class="op">&lt;-</span> <span class="fu"><a href="app.html">app</a></span><span class="op">(</span><span class="va">elev</span>, <span class="va">fun</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">levs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     value <span class="op">=</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>     elevation <span class="op">=</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="st">"low"</span>, <span class="st">"medium"</span>, <span class="st">"high"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">levels</span><span class="op">(</span><span class="va">elevCat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">levs</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Combine levels:</span></span></span>
<span class="r-in"><span><span class="va">combined</span> <span class="op">&lt;-</span> <span class="fu"><a href="concats.html">concats</a></span><span class="op">(</span><span class="va">cover</span>, <span class="va">elevCat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">combined</span></span></span>
<span class="r-in"><span><span class="fu">levels</span><span class="op">(</span><span class="va">combined</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Combine levels, treating value/NA combinations as new categories:</span></span></span>
<span class="r-in"><span><span class="va">combinedNA</span> <span class="op">&lt;-</span> <span class="fu"><a href="concats.html">concats</a></span><span class="op">(</span><span class="va">cover</span>, <span class="va">elevCat</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">combinedNA</span></span></span>
<span class="r-in"><span><span class="fu">levels</span><span class="op">(</span><span class="va">combinedNA</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adam B. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

