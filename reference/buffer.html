<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Increase/decrease the size of a vector or around non-NA cells of a raster — buffer,GRaster-method • fasterRaster</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Increase/decrease the size of a vector or around non-NA cells of a raster — buffer,GRaster-method"><meta name="description" content="Buffers can be constructed for GRasters or GVectors. For rasters, the buffer() function creates a buffer around non-NA cells. The output will be a raster. For vectors, the buffer() and st_buffer() functions create a vector polygon larger or smaller than the focal vector."><meta property="og:description" content="Buffers can be constructed for GRasters or GVectors. For rasters, the buffer() function creates a buffer around non-NA cells. The output will be a raster. For vectors, the buffer() and st_buffer() functions create a vector polygon larger or smaller than the focal vector."><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fasterRaster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">8.3.0.7024</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/adamlilith/fasterRaster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Increase/decrease the size of a vector or around non-NA cells of a raster</h1>
      <small class="dont-index">Source: <a href="https://github.com/adamlilith/fasterRaster/blob/master/R/buffer.r" class="external-link"><code>R/buffer.r</code></a></small>
      <div class="d-none name"><code>buffer.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Buffers can be constructed for <code>GRaster</code>s or <code>GVector</code>s. For rasters, the <code>buffer()</code> function creates a buffer around non-<code>NA</code> cells. The output will be a raster. For vectors, the <code>buffer()</code> and <code>st_buffer()</code> functions create a vector polygon larger or smaller than the focal vector.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for class 'GRaster'</span></span>
<span><span class="fu">buffer</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">width</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"meters"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"Euclidean"</span>,</span>
<span>  background <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  lowMemory <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'GVector'</span></span>
<span><span class="fu">buffer</span><span class="op">(</span><span class="va">x</span>, <span class="va">width</span>, capstyle <span class="op">=</span> <span class="st">"round"</span>, dissolve <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'GVector'</span></span>
<span><span class="fu">st_buffer</span><span class="op">(</span><span class="va">x</span>, <span class="va">dist</span>, endCapStyle <span class="op">=</span> <span class="st">"round"</span>, dissolve <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>GRaster</code> or <code>GVector</code>.</p></dd>


<dt id="arg-width">width<a class="anchor" aria-label="anchor" href="#arg-width"></a></dt>
<dd><p>Numeric: For rasters – Maximum distance cells must be from focal cells to be within the buffer. For rasters, if the buffering unit is <code>"cells</code>", then to get <code>n</code> cell widths, use <code>n + epsilon</code>, where <code>epsilon</code> is a small number (e.g., 0.001). The larger the buffer, this smaller this must be to ensure just <code>n</code> cells are included.</p>
<p>For vectors, distance from the object to place the buffer. Negative values create "inside" buffers. Units are in the same units as the current coordinate reference system (e.g., degrees for WGS84 or NAD83, often meters for projected systems).</p></dd>


<dt id="arg-unit">unit<a class="anchor" aria-label="anchor" href="#arg-unit"></a></dt>
<dd><p>Character: Rasters – Indicates the units of <code>width</code>. Can be one of:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">*</span> <span class="st">`</span><span class="at">"cells"</span><span class="st">`</span><span class="sc">:</span> Units are numbers of cells.</span></code></pre><p></p></div><ul><li><p><code>"meters"</code> (default), <code>"metres"</code>, or <code>"m"</code>; <code>"kilometers"</code> or <code>"km"</code>; <code>"feet"</code> or <code>"ft"</code>; <code>"miles"</code> or <code>"mi"</code>; <code>"nautical miles"</code> or <code>"nmi"</code>.
Partial matching is used and case is ignored.</p></li>
</ul></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Character: Rasters – Only used if <code>units</code> is <code>"cells"</code>. Indicates the manner in which distances are calculated for adding of cells:</p><ul><li><p><code>"Euclidean"</code>: Euclidean distance (default)</p></li>
<li><p><code>"Manhattan"</code>: "taxi-cab" distance</p></li>
<li><p><code>"maximum"</code>: Maximum of the north-south and east-west distances between points.</p></li>
</ul><p>Partial matching is used and case is ignored.</p></dd>


<dt id="arg-background">background<a class="anchor" aria-label="anchor" href="#arg-background"></a></dt>
<dd><p>Numeric: Rasters – Value to assign to cells that are not <code>NA</code> and not part of the buffer (default is 0).</p></dd>


<dt id="arg-lowmemory">lowMemory<a class="anchor" aria-label="anchor" href="#arg-lowmemory"></a></dt>
<dd><p>Logical: Rasters – Only used if buffering a raster and <code>units</code> is not <code>"meters"</code>. If <code>FALSE</code> (default) use faster, memory-intensive procedure. If <code>TRUE</code> then use the slower, low-memory version. To help decide which to use, consider using the low-memory version on a system with 1 GB of RAM for a raster larger than about 32000x32000 cells, or for a system with  with 8 GB of RAM a raster larger than about 90000x90000 cells.</p></dd>


<dt id="arg-capstyle-endcapstyle">capstyle, endCapStyle<a class="anchor" aria-label="anchor" href="#arg-capstyle-endcapstyle"></a></dt>
<dd><p>Character: Vectors – Style for ending the "cap" of buffers around lines. Valid options include <code>"rounded"</code>, <code>"square"</code>, and "<code>flat</code>".</p></dd>


<dt id="arg-dissolve">dissolve<a class="anchor" aria-label="anchor" href="#arg-dissolve"></a></dt>
<dd><p>Logical (<code>GVector</code>s): If <code>TRUE</code> (default), dissolve all buffers after creation. If <code>FALSE</code>, construct a buffer for each geometry. Note that overlapping buffers can cause this function to fail because it creates a topologically ambiguous polygon. Thus, using <code>dissolve = TRUE</code> is recommended.</p></dd>


<dt id="arg-dist">dist<a class="anchor" aria-label="anchor" href="#arg-dist"></a></dt>
<dd><p>Vectors – Same as <code>width</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Note that in some cases, topologically incorrect vectors can be created when buffering. This can arise when buffers intersect to create intersections that technically belong to two or more geometries. This issue can be resolved by dissolving borders between buffered geometries using <code>dissolve = TRUE</code>, but as of now, there is no fix if you do not want to dissolve geometries. A workaround would be to create a different <code>GVector</code> for each geometry, and then buffer each individually :(.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rspatial.github.io/terra/reference/buffer.html" class="external-link">terra::buffer()</a></code>, <code><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">sf::st_buffer()</a></code>, and modules <code>r.buffer</code>, <code>r.grow</code>, and <code>v.buffer</code> in <strong>GRASS</strong></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="grassStarted.html">grassStarted</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Setup</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Elevation raster, rivers vector</span></span></span>
<span class="r-in"><span><span class="va">madElev</span> <span class="op">&lt;-</span> <span class="fu"><a href="fastData.html">fastData</a></span><span class="op">(</span><span class="st">"madElev"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">madRivers</span> <span class="op">&lt;-</span> <span class="fu"><a href="fastData.html">fastData</a></span><span class="op">(</span><span class="st">"madRivers"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert a SpatRaster to a GRaster, and sf to a GVector</span></span></span>
<span class="r-in"><span><span class="va">elev</span> <span class="op">&lt;-</span> <span class="fu"><a href="fast.html">fast</a></span><span class="op">(</span><span class="va">madElev</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rivers</span> <span class="op">&lt;-</span> <span class="fu"><a href="fast.html">fast</a></span><span class="op">(</span><span class="va">madRivers</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Buffer a raster by a given distance:</span></span></span>
<span class="r-in"><span><span class="va">buffByDist</span> <span class="op">&lt;-</span> <span class="fu">buffer</span><span class="op">(</span><span class="va">elev</span>, width <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span> <span class="co"># 2000-m buffer</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">buffByDist</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">madElev</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Buffer a raster by a given number of cells:</span></span></span>
<span class="r-in"><span><span class="va">buffByCells</span> <span class="op">&lt;-</span> <span class="fu">buffer</span><span class="op">(</span><span class="va">elev</span>, width <span class="op">=</span> <span class="fl">20.01</span>, unit <span class="op">=</span> <span class="st">"cells"</span><span class="op">)</span> <span class="co"># 20-cell buffer</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">buffByCells</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">madElev</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Buffer a vector:</span></span></span>
<span class="r-in"><span><span class="va">buffRivers</span> <span class="op">&lt;-</span> <span class="fu">buffer</span><span class="op">(</span><span class="va">rivers</span>, width <span class="op">=</span> <span class="fl">2000</span>, dissolve <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># 2000-m buffer</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">buffRivers</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">madRivers</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"blue"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adam B. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

