<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Landscape fragmentation class following Riitters et al. (2020) — fragmentation,SpatRaster-method • fasterRaster</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Landscape fragmentation class following Riitters et al. (2020) — fragmentation,SpatRaster-method"><meta name="description" content="Riitters et al. (2020) propose a classification scheme for forest fragmentation (which can be applied to any habitat type). The scheme relies on calculating density (e.g., number of forested cells in a window around a focal cell) and connectivity (number of cases where neighboring cells are both forested). This function calculates these classes from a GRaster or SpatRaster in which the focal habitat type has cell values of 1, and non-focal habitat type has cell values of 0 or NA.
Note that by default, the SpatRaster and GRaster versions will create different results around the border of the raster. The SpatRaster version uses the terra::focal() function, which will not return an NA value when its window overlaps the raster border if the na.rm argument is TRUE. However, the GRaster version uses the GRASS module r.neighbors, which does return NA values in these cases.
The fragmentation classes are:
Value provided by none: None (i.e., no forest; default is NA).
1: Patch
2: Transitional
3: Perforated
4: Edge
5: Undetermined (not possible to obtain when w = 3)
6: Interior

"><meta property="og:description" content="Riitters et al. (2020) propose a classification scheme for forest fragmentation (which can be applied to any habitat type). The scheme relies on calculating density (e.g., number of forested cells in a window around a focal cell) and connectivity (number of cases where neighboring cells are both forested). This function calculates these classes from a GRaster or SpatRaster in which the focal habitat type has cell values of 1, and non-focal habitat type has cell values of 0 or NA.
Note that by default, the SpatRaster and GRaster versions will create different results around the border of the raster. The SpatRaster version uses the terra::focal() function, which will not return an NA value when its window overlaps the raster border if the na.rm argument is TRUE. However, the GRaster version uses the GRASS module r.neighbors, which does return NA values in these cases.
The fragmentation classes are:
Value provided by none: None (i.e., no forest; default is NA).
1: Patch
2: Transitional
3: Perforated
4: Edge
5: Undetermined (not possible to obtain when w = 3)
6: Interior

"><meta property="og:image" content="https://github.com/adamlilith/fasterRaster/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fasterRaster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">8.4.0.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/fasterRaster.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/GRasters.html">Types of GRasters</a></li>
    <li><a class="dropdown-item" href="../articles/faster_fasterRaster.html">Making fasterRaster faster</a></li>
    <li><a class="dropdown-item" href="../articles/addons.html">fasterRaster addons</a></li>
    <li><a class="dropdown-item" href="../articles/three_d_objects.html">3-dimensional objects</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/adamlilith/fasterRaster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Landscape fragmentation class following Riitters et al. (2020)</h1>
      <small class="dont-index">Source: <a href="https://github.com/adamlilith/fasterRaster/blob/master/R/fragmentation.r"><code>R/fragmentation.r</code></a></small>
      <div class="d-none name"><code>fragmentation.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Riitters et al. (2020) propose a classification scheme for forest fragmentation (which can be applied to any habitat type). The scheme relies on calculating density (e.g., number of forested cells in a window around a focal cell) and connectivity (number of cases where neighboring cells are both forested). This function calculates these classes from a <code>GRaster</code> or <code>SpatRaster</code> in which the focal habitat type has cell values of 1, and non-focal habitat type has cell values of 0 or <code>NA</code>.</p>
<p>Note that by default, the <code>SpatRaster</code> and <code>GRaster</code> versions will create different results around the border of the raster. The <code>SpatRaster</code> version uses the <code><a href="https://rspatial.github.io/terra/reference/focal.html" class="external-link">terra::focal()</a></code> function, which will not return an <code>NA</code> value when its window overlaps the raster border if the <code>na.rm</code> argument is <code>TRUE</code>. However, the <code>GRaster</code> version uses the <strong>GRASS</strong> module <code>r.neighbors</code>, which does return <code>NA</code> values in these cases.</p>
<p>The fragmentation classes are:</p><ul><li><p>Value provided by <code>none</code>: None (i.e., no forest; default is <code>NA</code>).</p></li>
<li><p>1: Patch</p></li>
<li><p>2: Transitional</p></li>
<li><p>3: Perforated</p></li>
<li><p>4: Edge</p></li>
<li><p>5: Undetermined (not possible to obtain when <code>w = 3</code>)</p></li>
<li><p>6: Interior</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for class 'SpatRaster'</span></span>
<span><span class="fu">fragmentation</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  w <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  undet <span class="op">=</span> <span class="st">"undetermined"</span>,</span>
<span>  none <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cores <span class="op">=</span> <span class="fu"><a href="faster.html">faster</a></span><span class="op">(</span><span class="st">"cores"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'GRaster'</span></span>
<span><span class="fu">fragmentation</span><span class="op">(</span><span class="va">x</span>, w <span class="op">=</span> <span class="fl">3</span>, undet <span class="op">=</span> <span class="st">"undetermined"</span>, none <span class="op">=</span> <span class="cn">NA</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>SpatRaster</code> or <code>GRaster</code>.</p></dd>


<dt id="arg-w">w<a class="anchor" aria-label="anchor" href="#arg-w"></a></dt>
<dd><p>An odd, positive integer: Size of the window across which fragmentation is calculated (in units of "rows" and "columns"). The default is 3, meaning the function uses a 3x3 moving window to calculate fragmentation. For large rasters, compute time is ~<em>O</em>(<code>N</code>) + <em>O</em>(<code>N * w^2</code>), where <code>N</code> is the number of cells in the raster. So, even a small increase in <code>w</code> can increase compute time by a lot.</p></dd>


<dt id="arg-undet">undet<a class="anchor" aria-label="anchor" href="#arg-undet"></a></dt>
<dd><p>Character: How to assign the "undetermined" case. Valid values are <code>"perforated"</code> (default), <code>"edge"</code>, and <code>"undetermined"</code>. Partial matching is used. If <code>Pf</code> is the proportional density raster cell value and <code>Pff</code> the proportional connectivity raster cell value, the undetermined case occurs when <code>Pf</code> &gt; 0.6 and <code>Pf == Pff</code>.</p></dd>


<dt id="arg-none">none<a class="anchor" aria-label="anchor" href="#arg-none"></a></dt>
<dd><p>Integer or <code>NA</code> (default): Value to assign to a cell with no focal habitat. Riitters et al. use <code>NA</code>. This will be forced to an integer if it is not an actual integer.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>Logical: If <code>TRUE</code> (default) and <code>x</code> is a <code>SpatRaster</code>, then cells near the edge of the raster where the window overlaps the edge can still be assigned a fragmentation class. If <code>FALSE</code>, these cells will be assigned a value of <code>none</code>.</p></dd>


<dt id="arg-cores">cores<a class="anchor" aria-label="anchor" href="#arg-cores"></a></dt>
<dd><p>Integer: Number of processor cores to use for when processing a <code>SpatRaster</code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical: If <code>TRUE</code> (default), display progress.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A categorical <code>SpatRaster</code> or <code>GRaster</code>. The values assigned to each class can be seen with <code><a href="levels.html">levels()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Riitters, K., J. Wickham, R. O'Neill, B. Jones, and E. Smith. 2000. Global-scale patterns of forest fragmentation. <em>Conservation Ecology</em> 4:3. URL: <a href="http://www.consecol.org/vol4/iss2/art3/" class="external-link">http://www.consecol.org/vol4/iss2/art3/</a>. Also note the <a href="https://www.ecologyandsociety.org/vol4/iss2/art3/errata/january26.2001.html" class="external-link">errata</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="grassStarted.html">grassStarted</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Setup</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example data:</span></span></span>
<span class="r-in"><span><span class="va">madForest</span> <span class="op">&lt;-</span> <span class="fu"><a href="fastData.html">fastData</a></span><span class="op">(</span><span class="st">"madForest2000"</span><span class="op">)</span> <span class="co"># raster</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Fragmentation classes from a SpatRaster</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fragTerra</span> <span class="op">&lt;-</span> <span class="fu">fragmentation</span><span class="op">(</span><span class="va">madForest</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">fragTerra</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="levels.html">levels</a></span><span class="op">(</span><span class="va">fragTerra</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="freq.html">freq</a></span><span class="op">(</span><span class="va">fragTerra</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Fragmentation classes from a GRaster</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert to GRaster:</span></span></span>
<span class="r-in"><span><span class="va">forest</span> <span class="op">&lt;-</span> <span class="fu"><a href="fast.html">fast</a></span><span class="op">(</span><span class="va">madForest</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fragmentation class:</span></span></span>
<span class="r-in"><span><span class="va">frag</span> <span class="op">&lt;-</span> <span class="fu">fragmentation</span><span class="op">(</span><span class="va">forest</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">frag</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="levels.html">levels</a></span><span class="op">(</span><span class="va">frag</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="freq.html">freq</a></span><span class="op">(</span><span class="va">frag</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adam B. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

