<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Apply a function to a set of rasters — app • fasterRaster</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Apply a function to a set of rasters — app"><meta name="description" content='app() applies a function to a set of "stacked" rasters. It is similar to the terra::app() and terra::lapp() functions.
appFuns() provides a table of GRASS functions that can be used by app() and their equivalents in R.
appCheck() tests whether a formula supplied to app() has any "forbidden" function calls.
The app() function operates in a manner somewhat different from terra::app(). The function to be applied must be written as a character string. For example, if the GRaster had layer names "x1" and "x2", then the function might be like "= max(sqrt(x1), log(x2))". Rasters cannot have the same names as functions used in the formula. In this example, the rasters could not be named "max", "sqrt", or "log". Note that the name of a GRaster is given by names()–this can be different from the name of the object in R.
The app() function will automatically check for GRaster names that appear also to be functions that appear in the formula. However, you can check a formula before running app() by using the appCheck() function. You can obtain a list of app() functions using appFuns(). Note that these are sometimes different from how they are applied in R.
Tips:
Make sure your GRasters have names(). The function matches on these, not the name of the variable you use in R for the GRaster.
Use null() instead of NA, and use isnull() instead of is.na().
If you want to calculate values using while ignoring NA (or null) values, see the functions that begin with n (like nmean).
Be mindful of the data type that a function returns. In GRASS, these are CELL (integer), FCELL (floating point values–precise to about the 7th decimal place), and DCELL (double-floating point values–precise to about the 15th decimal place; commensurate with the R numeric type). In cases where you want a GRaster to be treated like a float or double type raster, wrap the name of the GRaster in the float() or double() functions. This is especially useful if the GRaster might be assumed to be the CELL type because it only contains integer values. You can get the data type of a raster using datatype() with the type argument set to GRASS. You can change the data type of a GRaster using as.int(), as.float(), and as.doub(). Note that categorical rasters are really CELL (integer) rasters with an associated "levels" table. You can also change a CELL raster to a FCELL raster by adding then subtracting a decimal value, as in x - 0.1 + 0.1. See vignette("GRasters", package = "fasterRaster").
The rand() function returns integer values by default. If you want non-integer values, use the tricks mentioned above to datatype non-integer values. For example, if you want uniform random values in the range between 0 and 1, use something like = float(rand(0 + 0.1, 1 + 0.1) - 0.1).

'><meta property="og:description" content='app() applies a function to a set of "stacked" rasters. It is similar to the terra::app() and terra::lapp() functions.
appFuns() provides a table of GRASS functions that can be used by app() and their equivalents in R.
appCheck() tests whether a formula supplied to app() has any "forbidden" function calls.
The app() function operates in a manner somewhat different from terra::app(). The function to be applied must be written as a character string. For example, if the GRaster had layer names "x1" and "x2", then the function might be like "= max(sqrt(x1), log(x2))". Rasters cannot have the same names as functions used in the formula. In this example, the rasters could not be named "max", "sqrt", or "log". Note that the name of a GRaster is given by names()–this can be different from the name of the object in R.
The app() function will automatically check for GRaster names that appear also to be functions that appear in the formula. However, you can check a formula before running app() by using the appCheck() function. You can obtain a list of app() functions using appFuns(). Note that these are sometimes different from how they are applied in R.
Tips:
Make sure your GRasters have names(). The function matches on these, not the name of the variable you use in R for the GRaster.
Use null() instead of NA, and use isnull() instead of is.na().
If you want to calculate values using while ignoring NA (or null) values, see the functions that begin with n (like nmean).
Be mindful of the data type that a function returns. In GRASS, these are CELL (integer), FCELL (floating point values–precise to about the 7th decimal place), and DCELL (double-floating point values–precise to about the 15th decimal place; commensurate with the R numeric type). In cases where you want a GRaster to be treated like a float or double type raster, wrap the name of the GRaster in the float() or double() functions. This is especially useful if the GRaster might be assumed to be the CELL type because it only contains integer values. You can get the data type of a raster using datatype() with the type argument set to GRASS. You can change the data type of a GRaster using as.int(), as.float(), and as.doub(). Note that categorical rasters are really CELL (integer) rasters with an associated "levels" table. You can also change a CELL raster to a FCELL raster by adding then subtracting a decimal value, as in x - 0.1 + 0.1. See vignette("GRasters", package = "fasterRaster").
The rand() function returns integer values by default. If you want non-integer values, use the tricks mentioned above to datatype non-integer values. For example, if you want uniform random values in the range between 0 and 1, use something like = float(rand(0 + 0.1, 1 + 0.1) - 0.1).

'><meta property="og:image" content="https://github.com/adamlilith/fasterRaster/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fasterRaster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">8.4.0.7028</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/fasterRaster.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/GRasters.html">Types of GRasters</a></li>
    <li><a class="dropdown-item" href="../articles/faster_fasterRaster.html">Making fasterRaster faster</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/adamlilith/fasterRaster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Apply a function to a set of rasters</h1>
      <small class="dont-index">Source: <a href="https://github.com/adamlilith/fasterRaster/blob/master/R/app.r"><code>R/app.r</code></a></small>
      <div class="d-none name"><code>app.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>app()</code> applies a function to a set of "stacked" rasters. It is similar to the <code><a href="https://rspatial.github.io/terra/reference/app.html" class="external-link">terra::app()</a></code> and <code><a href="https://rspatial.github.io/terra/reference/lapp.html" class="external-link">terra::lapp()</a></code> functions.</p>
<p><code>appFuns()</code> provides a table of <strong>GRASS</strong> functions that can be used by <code>app()</code> and their equivalents in <strong>R</strong>.</p>
<p><code>appCheck()</code> tests whether a formula supplied to <code>app()</code> has any "forbidden" function calls.</p>
<p>The <code>app()</code> function operates in a manner somewhat different from <code><a href="https://rspatial.github.io/terra/reference/app.html" class="external-link">terra::app()</a></code>. The function to be applied <em>must</em> be written as a character string. For example, if the <code>GRaster</code> had layer names "<code>x1</code>" and "<code>x2</code>", then the function might be like <code>"= max(sqrt(x1), log(x2))"</code>. Rasters <strong>cannot</strong> have the same names as functions used in the formula. In this example, the rasters could not be named "max", "sqrt", or "log". Note that the name of a <code>GRaster</code> is given by <code><a href="names.html">names()</a></code>–this can be different from the name of the object in <strong>R</strong>.</p>
<p>The <code>app()</code> function will automatically check for <code>GRaster</code> names that appear also to be functions that appear in the formula. However, you can check a formula before running <code>app()</code> by using the <code>appCheck()</code> function. You can obtain a list of <code>app()</code> functions using <code>appFuns()</code>. Note that these are sometimes different from how they are applied in <strong>R</strong>.</p>
<p>Tips:</p><ul><li><p>Make sure your <code>GRaster</code>s have <code><a href="names.html">names()</a></code>. The function matches on these, not the name of the variable you use in <strong>R</strong> for the <code>GRaster</code>.</p></li>
<li><p>Use <code>null()</code> instead of <code>NA</code>, and use <code>isnull()</code> instead of <code><a href="math.html">is.na()</a></code>.</p></li>
<li><p>If you want to calculate values using while ignoring <code>NA</code> (or <code>null</code>) values, see the functions that begin with <code>n</code> (like <code>nmean</code>).</p></li>
<li><p>Be mindful of the data type that a function returns. In <strong>GRASS</strong>, these are <code>CELL</code> (integer), <code>FCELL</code> (floating point values–precise to about the 7th decimal place), and <code>DCELL</code> (double-floating point values–precise to about the 15th decimal place; commensurate with the <strong>R</strong> <code>numeric</code> type). In cases where you want a <code>GRaster</code> to be treated like a float or double type raster, wrap the name of the <code>GRaster</code> in the <code>float()</code> or <code><a href="https://rdrr.io/r/base/double.html" class="external-link">double()</a></code> functions. This is especially useful if the <code>GRaster</code> might be assumed to be the <code>CELL</code> type because it only contains integer values. You can get the data type of a raster using <code><a href="datatype.html">datatype()</a></code> with the <code>type</code> argument set to <code>GRASS</code>. You can change the data type of a <code>GRaster</code> using <code><a href="as.int.html">as.int()</a></code>, <code><a href="as.int.html">as.float()</a></code>, and <code><a href="as.int.html">as.doub()</a></code>. Note that categorical rasters are really <code>CELL</code> (integer) rasters with an associated "levels" table. You can also change a <code>CELL</code> raster to a <code>FCELL</code> raster by adding then subtracting a decimal value, as in <code>x - 0.1 + 0.1</code>. See <code><a href="../articles/GRasters.html">vignette("GRasters", package = "fasterRaster")</a></code>.</p></li>
<li><p>The <code>rand()</code> function returns integer values by default. If you want non-integer values, use the tricks mentioned above to datatype non-integer values. For example, if you want uniform random values in the range between 0 and 1, use something like <code>= float(rand(0 + 0.1, 1 + 0.1) - 0.1)</code>.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for class 'GRaster'</span></span>
<span><span class="fu">app</span><span class="op">(</span><span class="va">x</span>, <span class="va">fun</span>, datatype <span class="op">=</span> <span class="st">"auto"</span>, seed <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">appFuns</span><span class="op">(</span>warn <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'GRaster,character'</span></span>
<span><span class="fu">appCheck</span><span class="op">(</span><span class="va">x</span>, <span class="va">fun</span>, msgOnGood <span class="op">=</span> <span class="cn">TRUE</span>, failOnBad <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>GRaster</code> with one or more named layers.</p></dd>


<dt id="arg-fun">fun<a class="anchor" aria-label="anchor" href="#arg-fun"></a></dt>
<dd><p>Character: The function to apply. This must be written as a character string that follows these rules:</p><ul><li><p>It must use typical arithmetic operators like <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code> and/or functions that can be seen using <code>appFuns(TRUE)</code>.</p></li>
<li><p>The <code><a href="names.html">names()</a></code> of the rasters do not match any of the functions in the <code>appFuns(TRUE)</code> table. Note that <code>x</code> and <code>y</code> are forbidden names :(</p></li>
</ul><p>The help page for <strong>GRASS</strong> module <code>r.mapcalc</code> will be especially helpful. You can see this page using <code>grassHelp("r.mapcalc")</code>.</p></dd>


<dt id="arg-datatype">datatype<a class="anchor" aria-label="anchor" href="#arg-datatype"></a></dt>
<dd><p>Character: This ensures that rasters are treated as a certain type before they are operated on. This is useful when using rasters that have all integer values, which <strong>GRASS</strong> can assume represent integers, even if they are not supposed to. In this case, the output of operations on this raster might be an integer if otherwise not corrected. Partial matching is used, and options include:</p><ul><li><p><code>"integer"</code>: Force all rasters to integers by truncating their values. The output may still be of type <code>float</code> if the operation creates non-integer values.</p></li>
<li><p><code>"float"</code>: Force rasters to be considered floating-point values.</p></li>
<li><p><code>"double"</code>: Force rasters to be considered double-floating point values.</p></li>
<li><p><code>"auto"</code> (default): Ensure that rasters are represented by their native <code><a href="datatype.html">datatype()</a></code> (i.e., "CELL" rasters as integers, "FCELL" rasters as floating-point, and "DCELL" as double-floating point).</p></li>
</ul></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Numeric integer vector or <code>NULL</code> (default): A number for the random seed. Used only for <code>app()</code> function <code>rand()</code>, that generates a random number. If <code>NULL</code>, a seed will be generated. Defining the seed is useful for replicating a raster made with <code>rand()</code>. This must be an integer!</p></dd>


<dt id="arg-warn">warn<a class="anchor" aria-label="anchor" href="#arg-warn"></a></dt>
<dd><p>Logical (function <code>appFuns()</code>): If <code>TRUE</code> (default), display a warning when <code>allFuns()</code> is not called interactively.</p></dd>


<dt id="arg-msgongood">msgOnGood<a class="anchor" aria-label="anchor" href="#arg-msgongood"></a></dt>
<dd><p>Logical (function <code>appCheck()</code>): If <code>TRUE</code> (default), display a message if no overt problems with the raster names and formula are detected.</p></dd>


<dt id="arg-failonbad">failOnBad<a class="anchor" aria-label="anchor" href="#arg-failonbad"></a></dt>
<dd><p>Logical (function <code>appCheck()</code>): If <code>TRUE</code> (default), fail if overt problems with raster names and the formula are detected.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>GRaster</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rspatial.github.io/terra/reference/app.html" class="external-link">terra::app()</a></code>, <code><a href="https://rspatial.github.io/terra/reference/lapp.html" class="external-link">terra::lapp()</a></code>, <code><a href="subst.html">subst()</a></code>, <code><a href="classify.html">classify()</a></code>, and especially <strong>GRASS</strong> manual page for module <code>r.mapcalc</code> (see <code>grassHelp("r.mapcalc")</code>)</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="grassStarted.html">grassStarted</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Setup</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Elevation raster</span></span></span>
<span class="r-in"><span><span class="va">madElev</span> <span class="op">&lt;-</span> <span class="fu"><a href="fastData.html">fastData</a></span><span class="op">(</span><span class="st">"madElev"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert SpatRaster to a GRaster:</span></span></span>
<span class="r-in"><span><span class="va">elev</span> <span class="op">&lt;-</span> <span class="fu"><a href="fast.html">fast</a></span><span class="op">(</span><span class="va">madElev</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a "stack" of rasters for us to operate on:</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="va">elev</span>, <span class="va">elev</span><span class="op">^</span><span class="fl">2</span>, <span class="fu"><a href="math.html">sqrt</a></span><span class="op">(</span><span class="va">elev</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Demonstrate check for badly-named rasters:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="names.html">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="st">"cos"</span>, <span class="st">"asin"</span>, <span class="st">"exp"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fun</span> <span class="op">&lt;-</span> <span class="st">"= cos / asin + exp"</span></span></span>
<span class="r-in"><span><span class="fu">appCheck</span><span class="op">(</span><span class="va">x</span>, <span class="va">fun</span>, failOnBad <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Rename rasters acceptable names and run the function:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="names.html">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x3"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fun</span> <span class="op">&lt;-</span> <span class="st">"= (x1 / x2) + x3"</span></span></span>
<span class="r-in"><span><span class="fu">appCheck</span><span class="op">(</span><span class="va">x</span>, <span class="va">fun</span>, failOnBad <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">app</span><span class="op">(</span><span class="va">x</span>, fun <span class="op">=</span> <span class="va">fun</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This is the same as:</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">x</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">/</span> <span class="va">x</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">+</span> <span class="va">x</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We can view a table of app() functions using appFuns():</span></span></span>
<span class="r-in"><span><span class="fu">appFuns</span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="co"># Change to TRUE to see a Shiny version.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We can also get the table using:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">appFunsTable</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Apply other functions:</span></span></span>
<span class="r-in"><span><span class="va">fun</span> <span class="op">&lt;-</span> <span class="st">"= median(x1 / x2, x3, x1 * 2, cos(x2))"</span></span></span>
<span class="r-in"><span><span class="fu">app</span><span class="op">(</span><span class="va">x</span>, fun <span class="op">=</span> <span class="va">fun</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fun</span> <span class="op">&lt;-</span> <span class="st">"= round(x1) * tan(x2) + log(x3, 10)"</span></span></span>
<span class="r-in"><span><span class="fu">app</span><span class="op">(</span><span class="va">x</span>, fun <span class="op">=</span> <span class="va">fun</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Demonstrate effects of data type. The "+" sign does not guarantee</span></span></span>
<span class="r-in"><span><span class="co"># output is of a given type, and the rasters are coerced to integers before</span></span></span>
<span class="r-in"><span><span class="co"># the operation is conducted in the second function.</span></span></span>
<span class="r-in"><span><span class="va">fun</span> <span class="op">&lt;-</span> <span class="st">"= x1 + x3"</span></span></span>
<span class="r-in"><span><span class="fu">app</span><span class="op">(</span><span class="va">x</span>, fun <span class="op">=</span> <span class="va">fun</span>, datatype <span class="op">=</span> <span class="st">"float"</span><span class="op">)</span> <span class="co"># output is floating-point</span></span></span>
<span class="r-in"><span><span class="fu">app</span><span class="op">(</span><span class="va">x</span>, fun <span class="op">=</span> <span class="va">fun</span>, da <span class="op">=</span> <span class="st">"integer"</span><span class="op">)</span> <span class="co"># output is integer</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Some functions override the "datatype" argument. In this case, the output will</span></span></span>
<span class="r-in"><span><span class="co"># not be an integer because the sin() function returns a float value.</span></span></span>
<span class="r-in"><span><span class="va">fun</span> <span class="op">&lt;-</span> <span class="st">"= sin(x2)"</span></span></span>
<span class="r-in"><span><span class="fu">app</span><span class="op">(</span><span class="va">x</span>, fun <span class="op">=</span> <span class="va">fun</span>, datatype <span class="op">=</span> <span class="st">"integer"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make a raster with random numbers between 1 and 4, with equal probability</span></span></span>
<span class="r-in"><span><span class="co"># of each:</span></span></span>
<span class="r-in"><span><span class="va">fun</span> <span class="op">&lt;-</span> <span class="st">"= round(rand(0.5, 4.5))"</span></span></span>
<span class="r-in"><span><span class="va">rand</span> <span class="op">&lt;-</span> <span class="fu">app</span><span class="op">(</span><span class="va">elev</span>, fun <span class="op">=</span> <span class="va">fun</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rand</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="freq.html">freq</a></span><span class="op">(</span><span class="va">rand</span><span class="op">)</span> <span class="co"># cell frequencies</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adam B. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

