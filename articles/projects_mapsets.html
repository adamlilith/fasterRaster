<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>For developers: Locations/projects and mapsets • fasterRaster</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="For developers: Locations/projects and mapsets">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fasterRaster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">8.4.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/fasterRaster.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/GRasters.html">Types of GRasters</a></li>
    <li><a class="dropdown-item" href="../articles/faster_fasterRaster.html">Making fasterRaster faster</a></li>
    <li><a class="dropdown-item" href="../articles/addons.html">fasterRaster addons</a></li>
    <li><a class="dropdown-item" href="../articles/three_d_objects.html">3-dimensional objects</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/adamlilith/fasterRaster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>For developers: Locations/projects and mapsets</h1>
                        <h4 data-toc-skip class="author">Adam B.
Smith</h4>
            
            <h4 data-toc-skip class="date">2024-12-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/adamlilith/fasterRaster/blob/v8.4.0.3/vignettes/projects_mapsets.Rmd"><code>vignettes/projects_mapsets.Rmd</code></a></small>
      <div class="d-none name"><code>projects_mapsets.Rmd</code></div>
    </div>

    
    
<p><strong>GRASS GIS</strong> uses “projects” (which used to be called
“locations” before <strong>GRASS</strong> 8.4), and “mapsets” to store
files (rasters, vectors, etc.). <strong>fasterRaster</strong> uses
projects and mapsets, too, but in a manner that is invisibly to most
users. Thus, this tutorial is mostly of interest to developers and other
curious people.</p>
<div class="section level2">
<h2 id="grass-locationsprojects">
<strong>GRASS</strong> locations/projects<a class="anchor" aria-label="anchor" href="#grass-locationsprojects"></a>
</h2>
<p>Upon starting, <strong>GRASS</strong> creates (or loads) a project,
which corresponds to a folder on the user’s system. Importantly, all
rasters and vectors in a project must have the same coordinate reference
system (CRS). Confusingly, rasters and vectors in the same
<strong>GRASS</strong> location do not necessarily have to represent the
same place on Earth (this the renaming to “project”). In general,
rasters and vectors can only interact with one another if they are in
the same project and mapset. <strong>GRASS</strong> can only have a
connection to a single project at a time.</p>
<p><strong>fasterRaster</strong> handles projects and mapsets
automatically, so users typically do not need to manage them. Projects
are created on an as-needed basis. Within a given <strong>R</strong>
session, if no projects have already been made, the first call to <a href="https://adamlilith.github.io/fasterRaster/reference/fast.html" class="external-link"><code>fast()</code></a>
to create a <code>GRaster</code> or <code>GVector</code> will 1) make a
connection to <strong>GRASS</strong> and 2) create a location with a CRS
the same as the raster or vector. The raster or vector is then stored in
this location. <code><a href="../reference/fast.html">fast()</a></code> starts the connection and creates the
location using the exported by hidden function
<code><a href="../reference/locationCreate.html">.locationCreate()</a></code>.</p>
<p>If <code><a href="../reference/fast.html">fast()</a></code> is called and a project already exists that
has the same CRS as the raster or vector, one of two things will happen.
First, if <strong>GRASS</strong> is already connected to that project,
the raster or vector is simply imported. Second, if
<strong>GRASS</strong> is not connected to the project that has the
appropriate CRS, it will use the hidden function
<code><a href="../reference/locationRestore.html">.locationRestore()</a></code> to connect to the proper one, then
import the raster or vector.</p>
<p>Other functions might also cause <strong>GRASS</strong> to connect to
a pre-existing project Generally, if a function is applied to a
<code>GRaster</code> or <code>GVector</code>, it will first check to see
that <strong>GRASS</strong> is connected to the project in which the
raster or vector is stored. If not, it will use
<code><a href="../reference/locationRestore.html">.locationRestore()</a></code> to do so first.</p>
<p>Creating a new project or switching connections to pre-existing
project adds a few seconds to processing time of rasters and vectors. To
avoid this, users can work as much as possible on sets of rasters and
vectors with the same CRS (i.e., the same location).</p>
</div>
<div class="section level2">
<h2 id="fasterraster-mapsets">
<strong>fasterRaster</strong> mapsets<a class="anchor" aria-label="anchor" href="#fasterraster-mapsets"></a>
</h2>
<p><strong>GRASS</strong> “mapsets” are sub-folders within a location.
Every location <em>must</em> have a mapset (and thus, a sub-folder)
named “PERMANENT”. Users of mapsets are intended to store sub-projects
that use rasters and vectors with the same CRS. Users of
<strong>GRASS</strong> can switch between mapsets. However, for
ease-of-use and development, <strong>fasterRaster</strong> always uses
the “PERMANENT” mapset within a given location.</p>
</div>
<div class="section level2">
<h2 id="functions-that-manage-locations-and-mapsets">Functions that manage locations and mapsets<a class="anchor" aria-label="anchor" href="#functions-that-manage-locations-and-mapsets"></a>
</h2>
<p>The <code><a href="../reference/crs.html">crs()</a></code> function (wth no arguments) can be used to get
the coordinate reference system of the current project/location.</p>
<p>The followoinng functions functions are hidden, but documented. All
functions take “<code>x</code>” as an argument.</p>
<ul>
<li>
<code>.location(x)</code>: Name of the location of <code>x</code> (a
<strong>fasterRaster</strong> object), or the current location (if
<code>x</code> is missing).</li>
<li>
<code><a href="../reference/locations.html">.locations()</a></code>: Names and CRSs of all available locations
(takes no arguments).</li>
<li>
<code>.locationCreate(x)</code>: Create a location with the same CRS
as <code>x</code>.</li>
<li>
<code>.locationRestore(x)</code>: Connect to a pre-existing
location. <code>x</code> can be a <strong>fasterRaster</strong> object,
a <code>SpatRaster</code>, <code>SpatVector</code>, or <code>sf</code>
object, or the name of a location.</li>
<li>
<code>.locationFind(x, return = &lt;option&gt;)</code>: Given a
<code>GSpatial</code> object <code>x</code>, find the name, index, or
CRS of a location that matches it. If <code>x</code> is missing, return
a list of all locations. <code>&lt;option&gt;</code> can be
<code>"name"</code> (name of the location), <code>"index"</code>
(index), or “<code>crs</code>” (coordinate reference string in WKT
format).</li>
<li>
<code><a href="../reference/ls.html">.ls()</a></code>: List all file names of rasters and/or vectors in
the current location.</li>
<li>
<code>.mapset(x)</code>: Name of the mapset that contains the object
<code>x</code>.</li>
</ul>
</div>
<div class="section level2">
<h2 id="more-rabbit-holing">More rabbit-holing<a class="anchor" aria-label="anchor" href="#more-rabbit-holing"></a>
</h2>
<p>Upon being loaded or attached, <strong>fasterRaster</strong> creates
a package-specific environment named <code>.fasterRaster</code>, where
it keeps a list of projects at <code>.fasterRaster$locations</code>.
This is a named list of projects, where each element is has the name of
the location, and the value of the element is the location’s CRS. The
current location is tracked at
<code>.fasterRaster$activeLocation</code>.</p>
<p>~ FINIS ~</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adam B. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
